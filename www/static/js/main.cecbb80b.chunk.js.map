{"version":3,"sources":["constants.js","utils.js","models/todoItem.js","models/todoEvent.js","backend/eventCache.js","backend/backend.js","models/todoList.js","backend/storage.js","test/test_helper.js","backend/testBackend.js","components/topBar.js","models/user.js","components/userIcon.js","models/todoListGroup.js","models/logic/filterTodos.js","models/logic/grouper.js","models/filter.js","components/todoList/filterChips.js","components/todoItem/styled/todoForm.js","components/todoList/addTodo.js","components/todoItem/basic/dueDate.js","components/todoItem/styled/dueDate.js","components/todoItem/basic/todoText.js","components/todoItem/styled/todoText.js","components/todoItem/styled/setDueButton.js","components/todoItem/styled/todoItemNote.js","components/todoItem/styled/editTodo.js","components/todoItem/styled/todoItem.js","components/todoList/todoGroup.js","components/bottomBar/groupingMenu.js","components/bottomBar/filterDialog.js","components/bottomBar.js","components/todoList/todoList.js","components/topBar/todoListChooser.js","components/topBar/createTodoList.js","config/websocket.js","pages/todoList.js","config/router.js","pages/login.js","pages/logout.js","pages/auth.js","pages/loadTodoLists.js","pages/index.js","index.js"],"names":["BACKEND_URL","utils","generateUuid","replace","c","r","Math","random","toString","getUrlParam","name","decodeURIComponent","RegExp","exec","window","location","search","TodoItem","args","Object","classCallCheck","this","id","uuid","completed","archived","isPriority","completedDate","subject","contexts","projects","due","notes","parseISO","date","format","Date","addDays","monday","setDay","_this","split","forEach","word","startsWith","push","substring","note","filter","n","TodoEvent","eventType","todo","EventCache","cache","localStorage","getItem","event","map","e","toJSON","Backend","token","apiRequest","concat","todolistUUID","events","todolist","path","method","params","arguments","length","undefined","Promise","resolve","reject","headers","Headers","append","opts","mode","url","constants","toQueryString","body","JSON","stringify","fetch","then","resp","status","statusText","json","catch","error","obj","parts","i","hasOwnProperty","encodeURIComponent","join","TodoList","updatedAt","todos","findLowestUnusedID","deleteTodo","addTodo","t","todoIds","maxId","max","apply","toConsumableArray","includes","createTodoListFromBackend","backendJSON","todo_items_attributes","TodoItemModel","updated_at","Storage","parse","list","storageJSON","loadTodoLists","find","todoLists","setItem","todoList","lists","index","l","indexOf","saveTodoLists","open","todoData","useStyles","makeStyles","root","flexGrow","grow","TopBar","props","console","log","classes","react_default","a","createElement","className","AppBar_default","position","Toolbar_default","Typography_default","variant","color","children","User","email","imageUrl","loadUser","logoutUser","clear","isUserLoggedIn","theme","icon","link","textDecoration","UserIcon","_useState","useState","_useState2","slicedToArray","isOpen","setIsOpen","_useState3","_useState4","anchorEl","setAnchorEl","user","toggleOpen","currentTarget","Fragment","IconButton_default","onClick","Person_default","Menu_default","onClose","MenuItem_default","target","href","Redirect","to","TodoListGroup","sort","t1","t2","dueDate","filterTodos","some","subjectContains","toLowerCase","filterSubject","isSameDay","differenceInDays","isMonday","isTuesday","isWednesday","isThursday","isFriday","isSaturday","isSunday","byContext","grouped","getContexts","context","todosWithContext","byProject","getProjects","project","todosWithProject","byAll","ret","groups","g1","g2","applyGrouping","grouping","Filter","group","s","filteredTodos","str","chip","margin","FilterChips","currentFilter","toFilterStrings","Chip_default","key","label","onDelete","removeFilterString","onChangeFilter","text","width","maxWidth","withMargin","marginTop","marginBottom","red","backgroundColor","&:hover","subjectRef","React","createRef","Margin","TodoForm","todoItem","todoItemAttrs","setTodoItem","showDeleteDialog","setShowDeleteDialog","onChange","isValid","current","value","setSubject","onCloseDeleteDialog","onKeypress","keyCode","useEffect","addEventListener","removeEventListener","material_ui_pickers_esm","DateFnsUtils","DialogTitle_default","title","DialogContent_default","todoForm_Margin","TextField_default","defaultValue","autoFocus","inputRef","autoOk","keyboardIcon","Keyboard_default","leftArrowIcon","ArrowLeft_default","rightArrowIcon","ArrowRight_default","clearable","setDue","FormControlLabel_default","control","Switch_default","toggleCompleted","checked","togglePriority","toggleArchived","Button_default","Dialog_default","DialogActions_default","fab","zIndex","bottom","left","right","AddTodo","storage","modalOpen","setModalOpen","setModalIsOpen","toggleModalOpen","isModalOpen","setTimeout","document","Fab_default","Tooltip_default","disableFocusListener","Add_default","fullWidth","todoForm","onAddTodoItem","DueDate","formattedDate","realDate","toDate","grey","past","isToday","today","isBefore","isTomorrow","tomorrow","future","withStyles","blue","TodoText","parsedWords","val","isContext","trim","isProject","classNames","strike","bold","cursor","fontWeight","SetDueButton","_React$useState","_React$useState2","_React$useState3","_React$useState4","onCloseMenu","aria-label","Today_default","setDueToday","setDueTomorrow","setDueMonday","notesAreaItem","borderTop","listStyleType","display","&:first-child","noteText","flex","paddingTop","DeleteForever_default","EditTodo","show","onEditTodo","onDeleteTodo","_shortWidthHide","_shortWidthShow","_todo","_firstTodo","shortWidthHide","defineProperty","breakpoints","down","spacing","unit","up","shortWidthShow","firstTodo","starIcon","yellow","notesArea","marginLeft","setTodoItemAttrs","showNotes","setShowNotes","_useState5","_useState6","showEditTodo","setShowEditTodo","toggleShowEditTodo","toggleComplete","onChangeTodo","deleteNote","ArchiveButton","Archive_default","UnarchiveButton","Unarchive_default","isSelected","ListItem_default","isFirst","Checkbox_default","tabIndex","Star_default","StarBorder_default","ListItemText_default","primary","styled_todoText","onSubjectClick","secondary","styled_dueDate","Collapse_default","in","timeout","unmountOnExit","todoItemNote","onDeleteNote","editTodo","ListItemSecondaryAction_default","setDueButton","ExpandMore_default","ExpandLess_default","TodoGroup","sortedTodos","List_default","subheader","ListSubheader_default","component","styled_todoItem","selectedTodoUUID","GroupingMenu","handleClose","onChooseGrouping","Boolean","bind","searchBoxOuter","searchBox","dueLabel","FilterDialog","currentFilterAttrs","setCurrentFilter","FilterModel","update","filterChips","type","autoComplete","ev","preventDefault","toggleUseCompleted","toggleUseIsPriority","toggleIsPriority","toggleUseArchived","InputLabel_default","htmlFor","Select_default","input","Input_default","Divider_default","justifyContent","appBar","top","BottomBar","filterDialog","groupingMenu","hidden","toggleContainer","height","padding","alignItems","minWidth","controls","listContainer","paddingBottom","listName","textAlign","flexWrap","withSnackbar","storedFilter","LoadFromStorage","filterModelAttrs","setFilterModelAttrs","filterModel","setSelectedTodoUUID","applyFilter","onChangeTodoItem","updateTodo","enqueueSnackbar","onDeleteTodoItem","save","addSubjectContains","todoUUIDs","g","flat","nextTodoUUID","prevTodoUUID","todoGroup","bottomBar","TodoListSelection","button","Chooser","onSelectList","onSelectTodoList","ViewArray_default","todoListChooser_TodoListSelection","nameRef","CreateTodoList","newList","TodoListModel","onCreateTodoList","WebsocketProcessor","processorFn","WebsocketHandler","processors","createClass","socket","readyState","OPEN","msg","client_id","channel","request","WebSocket","onopen","send","ping","onmessage","data","processor","onclose","registerSocket","p","history","eventCache","mostRecentTodoList","match","tl","setTodoList","backend","fetchList","cb","navigator","onLine","fetchTodoList","updateTodoList","processSocketUpdate","updatedList","loadTodoList","fetchTodoLists","todolists","currentList","socketProcessor","registerProcessor","deregisterProcessor","newTodoList","topBar","createTodoList","todoListChooser","userIcon","todoList_todoList","addItem","middle","loginPaper","flexDirection","paperItem","Login","Paper_default","marked","align","Logout","Auth","UserModel","LoadTodoLists","cordova","createHashHistory","Routes","Router","Route","exact","render","createMuiTheme","palette","indigo","main","Index","CssBaseline_default","build","maxSnack","preventDuplicate","anchorOrigin","vertical","horizontal","core_styles","router","ReactDOM","pages","getElementById"],"mappings":"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","file":"static/js/main.cecbb80b.chunk.js","sourcesContent":["// Groupings\nexport const BY_ALL = \"all\"\nexport const BY_CONTEXT = \"context\"\nexport const BY_PROJECT = \"project\"\n\n// URLs\nexport const PROD_BACKEND_URL = \"https://api.ultralist.io\"\nexport const LOCAL_BACKEND_URL = \"http://localhost:3000\"\nexport const BACKEND_URL =\n  process.env.NODE_ENV === \"production\" ? PROD_BACKEND_URL : LOCAL_BACKEND_URL\n\n// filter stuff\nexport const FILTER_KEY = \"filter-key\"\n\n// sockets stuff\nexport const PROD_SOCKET_URL = \"wss://ws.ultralist.io\"\nexport const DEV_SOCKET_URL = \"ws://localhost:8080\"\nexport const SOCKET_URL =\n  process.env.NODE_ENV === \"production\" ? PROD_SOCKET_URL : DEV_SOCKET_URL\n","const utils = {\n  generateUuid: () => {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n      var r = (Math.random() * 16) | 0,\n        v = c == \"x\" ? r : (r & 0x3) | 0x8\n      return v.toString(16)\n    })\n  },\n  getUrlParam: name => {\n    return (\n      decodeURIComponent(\n        (new RegExp(\"[?|&]\" + name + \"=\" + \"([^&;]+?)(&|#|;|$)\").exec(\n          window.location.search\n        ) || [null, \"\"])[1].replace(/\\+/g, \"%20\")\n      ) || null\n    )\n  }\n}\n\nexport default utils\n","// @flow\nimport utils from \"../utils\"\nimport { format, addDays, setDay, parseISO } from \"date-fns\"\n\ntype ConstructorArgs = {\n  id?: number,\n  uuid?: string,\n  completed?: boolean,\n  archived?: boolean,\n  contexts?: Array<string>,\n  projects?: Array<string>,\n  isPriority?: boolean,\n  completedDate?: string | null,\n  subject?: string,\n  due?: string | null,\n  notes?: Array<string>\n}\n\nexport default class TodoItem {\n  id: number | null\n  uuid: string\n  completed: boolean\n  archived: boolean\n  isPriority: boolean\n  completedDate: string | null\n  subject: string\n  contexts: Array<string>\n  projects: Array<string>\n  due: string | null\n  notes: Array<string>\n\n  constructor(args: ConstructorArgs) {\n    this.id = args.id || null\n    this.uuid = args.uuid || utils.generateUuid()\n    this.completed = args.completed || false\n    this.archived = args.archived || false\n    this.isPriority = args.isPriority || false\n    this.completedDate = args.completedDate || null\n    this.subject = args.subject || \"\"\n    this.contexts = args.contexts || []\n    this.projects = args.projects || []\n    this.due = args.due || null\n    this.notes = args.notes || []\n  }\n\n  dueDate(): Date | null {\n    return this.due ? parseISO(this.due || \"\") : null\n  }\n\n  setDue(date: Date | null) {\n    if (date === null) {\n      this.due = null\n    } else {\n      this.due = format(date, \"yyyy-MM-dd\")\n    }\n  }\n\n  toggleCompleted() {\n    this.completed = !this.completed\n\n    if (this.completed) {\n      this.completedDate = format(new Date(), \"yyyy-MM-dd\")\n    } else {\n      this.completedDate = null\n    }\n  }\n\n  togglePriority() {\n    this.isPriority = !this.isPriority\n  }\n\n  toggleArchived() {\n    this.archived = !this.archived\n  }\n\n  setDueToday() {\n    this.due = format(new Date(), \"yyyy-MM-dd\")\n  }\n\n  setDueTomorrow() {\n    this.due = format(addDays(new Date(), 1), \"yyyy-MM-dd\")\n  }\n\n  setDueMonday() {\n    let monday = setDay(new Date(), 1)\n    if (monday < new Date()) monday = addDays(monday, 7)\n    this.due = format(monday, \"yyyy-MM-dd\")\n  }\n\n  setSubject(subject: string) {\n    this.subject = subject\n    this.projects = []\n    this.contexts = []\n\n    subject.split(\" \").forEach(word => {\n      if (word.startsWith(\"+\")) this.projects.push(word.substring(1))\n      if (word.startsWith(\"@\")) this.contexts.push(word.substring(1))\n    })\n  }\n\n  deleteNote(note: string) {\n    this.notes = this.notes.filter(n => n !== note)\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      uuid: this.uuid,\n      completed: this.completed,\n      archived: this.archived,\n      isPriority: this.isPriority,\n      completedDate: this.completedDate,\n      subject: this.subject,\n      contexts: this.contexts,\n      projects: this.projects,\n      due: this.due,\n      notes: this.notes\n    }\n  }\n}\n","// @flow\nimport TodoItemModel from \"./todoItem\"\n\ntype TodoEvents = \"EventAdded\" | \"EventDeleted\" | \"EventUpdated\"\n\nexport default class TodoEvent {\n  todo: TodoItemModel\n  eventType: TodoEvents\n\n  constructor(eventType: TodoEvents, todo: TodoItemModel) {\n    this.eventType = eventType\n    this.todo = todo\n  }\n\n  toJSON() {\n    return {\n      eventType: this.eventType,\n      id: this.todo.id,\n      uuid: this.todo.uuid,\n      subject: this.todo.subject,\n      projects: this.todo.projects,\n      contexts: this.todo.contexts,\n      due: this.todo.due,\n      completed: this.todo.completed,\n      completedDate: this.todo.completedDate,\n      archived: this.todo.archived,\n      isPriority: this.todo.isPriority,\n      notes: this.todo.notes\n      // createdAt: this.todo.createdAt\n    }\n  }\n}\n\nexport const createAddEvent = (todo: TodoItemModel) => {\n  return new TodoEvent(\"EventAdded\", todo)\n}\n\nexport const createUpdateEvent = (todo: TodoItemModel) => {\n  return new TodoEvent(\"EventUpdated\", todo)\n}\n\nexport const createDeleteEvent = (todo: TodoItemModel) => {\n  return new TodoEvent(\"EventDeleted\", todo)\n}\n","// @flow\nimport TodoEvent from \"../models/todoEvent\"\n\nexport default class EventCache {\n  cache: Array<TodoEvent>\n\n  constructor() {\n    const cache = window.localStorage.getItem(\"eventCache\")\n    this.cache = cache ? cache : []\n  }\n\n  addItem(event: TodoEvent) {\n    this.cache.push(event)\n    // window.localStorage.setItem(\"eventCache\", this.cache)\n  }\n\n  toJSON(): Array<Object> {\n    return this.cache.map(e => e.toJSON())\n  }\n\n  clear() {\n    this.cache = []\n    // window.localStorage.setItem(\"eventCache\", this.cache)\n  }\n}\n","import * as constants from \"../constants\"\nimport EventCache from \"./eventCache\"\n\nexport default class Backend {\n  token: string\n\n  constructor(token: string) {\n    this.token = token\n  }\n\n  fetchTodoLists() {\n    return this.apiRequest(\"api/v1/todo_lists\", \"GET\")\n  }\n\n  fetchTodoList(uuid: string) {\n    return this.apiRequest(`api/v1/todo_lists/${uuid}`, \"GET\")\n  }\n\n  updateTodoList(todolistUUID: string, cache: EventCache) {\n    return this.apiRequest(`api/v1/todo_lists/${todolistUUID}`, \"PUT\", {\n      events: cache.toJSON()\n    })\n  }\n\n  createTodoList(uuid: string, name: string) {\n    return this.apiRequest(`api/v1/todo_lists`, \"POST\", {\n      todolist: {\n        uuid: uuid,\n        name\n      }\n    })\n  }\n\n  apiRequest(path: string, method: string, params: object = {}) {\n    return new Promise((resolve, reject) => {\n      const headers = new Headers()\n      if (this.token) {\n        headers.append(\"Authorization\", `Bearer ${this.token}`)\n      }\n      headers.append(\"Accept\", \"application/json\")\n      headers.append(\"Content-Type\", \"application/json\")\n\n      interface OptsInterface {\n        headers: Headers;\n        mode: RequestMode;\n        method: string;\n        body?: string;\n      }\n      const opts: OptsInterface = { headers, mode: \"cors\", method }\n\n      let url = `${constants.BACKEND_URL}/${path}`\n\n      if (process.env.NODE_ENV !== \"production\") {\n        console.log(\"******************************\")\n        console.log(\"API request: \", url)\n        console.log(\"API method: \", method)\n        console.log(\"API params: \", params)\n        console.log(\"Using token: \", this.token)\n        console.log(\"******************************\")\n      }\n\n      if (method === \"GET\") {\n        url += `?${this.toQueryString(params)}`\n      } else {\n        opts.body = JSON.stringify(params)\n      }\n\n      fetch(url, opts)\n        .then(resp => {\n          if (resp.status !== 200) {\n            reject(resp.statusText)\n          }\n          return resp.json()\n        })\n        .then(json => resolve(json))\n        .catch(error => {\n          reject(error)\n        })\n    })\n  }\n\n  toQueryString(obj: object) {\n    const parts = []\n    for (let i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        parts.push(encodeURIComponent(i) + \"=\" + encodeURIComponent(obj[i]))\n      }\n    }\n    return parts.join(\"&\")\n  }\n}\n","// @flow\nimport { parseISO } from \"date-fns\"\nimport TodoItemModel from \"./todoItem\"\nimport utils from \"../utils\"\n\ntype ConstructorArgs = {\n  name?: string,\n  uuid?: string,\n  updatedAt?: Date,\n  todos?: Array<TodoItemModel>\n}\n\nexport default class TodoList {\n  name: string\n  uuid: string\n  updatedAt: Date\n  todos: Array<TodoItemModel>\n\n  constructor(args: ConstructorArgs) {\n    this.name = args.name || \"New List\"\n    this.uuid = args.uuid || utils.generateUuid()\n    this.updatedAt = args.updatedAt || new Date()\n    this.todos = args.todos || []\n  }\n\n  addTodo(todo: TodoItemModel) {\n    todo.id = findLowestUnusedID(this.todos)\n    this.todos.push(todo)\n  }\n\n  updateTodo(todo: TodoItemModel) {\n    this.deleteTodo(todo)\n    this.addTodo(todo)\n  }\n\n  deleteTodo(todo: TodoItemModel) {\n    this.todos = this.todos.filter(t => t.uuid !== todo.uuid)\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      uuid: this.uuid,\n      updatedAt: this.updatedAt,\n      todos: this.todos.map(todo => todo.toJSON())\n    }\n  }\n}\n\nexport const findLowestUnusedID = (todos: Array<TodoItemModel>) => {\n  if (todos.length === 0) return 1\n\n  const todoIds = todos.map(t => t.id || -1)\n  const maxId = Math.max(...todoIds)\n\n  for (let i = 1; i < maxId; i++) {\n    if (i !== -1 && !todoIds.includes(i)) {\n      return i\n    }\n  }\n  return maxId + 1\n}\n\nexport const createTodoListFromBackend = (backendJSON: Object) => {\n  return new TodoList({\n    name: backendJSON.name,\n    todos: backendJSON.todo_items_attributes.map(i => new TodoItemModel(i)),\n    updatedAt: parseISO(backendJSON.updated_at),\n    uuid: backendJSON.uuid\n  })\n}\n\nexport const createTodoListFromJSON = (storageJSON: Object) => {\n  return new TodoList({\n    name: storageJSON.name,\n    todos: storageJSON.todos.map(i => new TodoItemModel(i)),\n    updatedAt: parseISO(storageJSON.updatedAt),\n    uuid: storageJSON.uuid\n  })\n}\n","// @flow\nimport TodoList, { createTodoListFromJSON } from \"../models/todoList\"\n\nexport default class Storage {\n  loadTodoLists() {\n    const rawLists = JSON.parse(window.localStorage.getItem(\"todolists\"))\n    return rawLists.map(list => createTodoListFromJSON(list))\n  }\n\n  loadTodoList(uuid: string): TodoList {\n    return this.loadTodoLists().find(list => list.uuid === uuid)\n  }\n\n  saveTodoLists(todoLists: Array<TodoList>) {\n    const storageJSON = todoLists.map(list => list.toJSON())\n    window.localStorage.setItem(\"todolists\", JSON.stringify(storageJSON))\n  }\n\n  updateTodoList(todoList: TodoList) {\n    const lists = this.loadTodoLists()\n    const index = lists.map(l => l.uuid).indexOf(todoList.uuid)\n    lists[index] = todoList\n    this.saveTodoLists(lists)\n  }\n\n  isModalOpen(): boolean {\n    return window.localStorage.getItem(\"modalOpen\") === \"true\"\n  }\n\n  setModalIsOpen(open: boolean) {\n    window.localStorage.setItem(\"modalOpen\", open)\n  }\n}\n","import { format, addDays } from \"date-fns\"\nimport utils from \"../utils\"\nimport TodoItemModel from \"../models/todoItem\"\n\nexport const todoData = [\n  {\n    id: 1,\n    uuid: utils.generateUuid(),\n    subject: \"Call with @Bob and @Frank about +bigProject\",\n    projects: [\"bigProject\"],\n    contexts: [\"Bob\", \"Frank\"],\n    isPriority: true,\n    due: format(addDays(new Date(), 1), \"yyyy-MM-dd\"),\n    notes: [\"here is note 1\", \"here is note 2\"],\n    completed: false,\n    archived: false\n  },\n  {\n    id: 2,\n    uuid: utils.generateUuid(),\n    subject: \"Strategy for +mobile @pomodoro\",\n    projects: [\"mobile\"],\n    contexts: [],\n    isPriority: false,\n    due: format(new Date(), \"yyyy-MM-dd\"),\n    notes: [\"here is note 1\", \"here is note 2\"],\n    completed: false,\n    archived: false\n  },\n  {\n    id: 3,\n    uuid: utils.generateUuid(),\n    subject: \"Send phone udid to @Marty to test +mobile projects\",\n    projects: [\"mobile\"],\n    contexts: [\"marty\"],\n    isPriority: false,\n    due: format(new Date(), \"yyyy-MM-dd\"),\n    notes: [],\n    completed: false,\n    archived: false\n  },\n  {\n    id: 4,\n    uuid: utils.generateUuid(),\n    subject: \"Did @john call me back about the +testProject?\",\n    projects: [\"testProject\"],\n    contexts: [\"john\"],\n    isPriority: false,\n    due: format(new Date(), \"yyyy-MM-dd\"),\n    notes: [],\n    completed: true,\n    archived: false\n  },\n  {\n    id: 5,\n    uuid: utils.generateUuid(),\n    subject: \"Follow up with @nick about 6-month salary increase\",\n    projects: [],\n    contexts: [\"Nick\"],\n    due: format(addDays(new Date(), -2), \"yyyy-MM-dd\"),\n    notes: [],\n    completed: true,\n    isPriority: true,\n    archived: true\n  },\n  {\n    id: 6,\n    uuid: utils.generateUuid(),\n    subject:\n      \"Work on +budget presentation for leadership team, sell to @Nick first\",\n    projects: [\"budget\"],\n    contexts: [\"Nick\"],\n    due: format(addDays(new Date(), -2), \"yyyy-MM-dd\"),\n    notes: [],\n    completed: false,\n    isPriority: false,\n    archived: false\n  },\n  {\n    id: 7,\n    uuid: utils.generateUuid(),\n    subject: \"no +due @date\",\n    projects: [\"due\"],\n    contexts: [\"date\"],\n    due: null,\n    notes: [],\n    completed: false,\n    isPriority: false,\n    archived: false\n  }\n]\n\nexport const todos = todoData.map(t => new TodoItemModel(t))\n","// @flow\n\nimport { todoData } from \"../test/test_helper\"\nimport EventCache from \"./eventCache\"\nimport utils from \"../utils\"\n\nconst todoList = {\n  name: \"test list\",\n  todo_items_attributes: todoData,\n  uuid: utils.generateUuid()\n}\n\nexport default class TestBackend {\n  token: string\n\n  constructor(token: string) {\n    this.token = token\n  }\n\n  fetchTodoList(uuid: string) {\n    return new Promise(resolve => resolve(todoList))\n  }\n\n  updateTodoList(uuid: string, cache: EventCache) {\n    return new Promise(resolve => resolve(todoList))\n  }\n\n  createTodoList(uuid: string, name: string) {\n    return new Promise(resolve => resolve(todoList))\n  }\n\n  fetchTodoLists() {\n    return new Promise(resolve => {\n      resolve([todoList])\n    })\n  }\n}\n","// @flow\nimport React from \"react\"\n\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport Typography from \"@material-ui/core/Typography\"\nimport { makeStyles } from \"@material-ui/styles\"\n\nconst useStyles = makeStyles({\n  root: {\n    flexGrow: 1\n  },\n  grow: {\n    flexGrow: 1\n  }\n})\n\nconst TopBar = props => {\n  console.log(\"Top bar\")\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"fixed\">\n        <Toolbar>\n          <Typography variant=\"title\" color=\"inherit\">\n            Ultralist\n          </Typography>\n\n          <div className={classes.grow} />\n          <div>{props.children}</div>\n        </Toolbar>\n      </AppBar>\n    </div>\n  )\n}\n\nexport default TopBar\n","// @flow\n\ntype ConstructorArgs = {\n  name?: string,\n  token?: string,\n  email?: string,\n  imageUrl?: string,\n  uuid?: string\n}\n\nexport default class User {\n  name: string\n  token: string\n  email: string\n  imageUrl: string\n  uuid: string\n\n  constructor(args: ConstructorArgs) {\n    this.name = args.name || \"\"\n    this.token = args.token || \"\"\n    this.email = args.email || \"\"\n    this.imageUrl = args.imageUrl || \"\"\n    this.uuid = args.uuid || \"\"\n  }\n\n  save() {\n    window.localStorage.setItem(\"user\", JSON.stringify(this.toJSON()))\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      token: this.token,\n      email: this.email,\n      uuid: this.uuid,\n      imageUrl: this.imageUrl\n    }\n  }\n}\n\nexport const loadUser = (): User => {\n  const json = JSON.parse(window.localStorage.getItem(\"user\"))\n  return new User(json || {})\n}\n\nexport const logoutUser = (): User => {\n  window.localStorage.clear()\n}\n\nexport const isUserLoggedIn = (): boolean => {\n  const user = JSON.parse(window.localStorage.getItem(\"user\"))\n  if (user === null) return false\n  return true\n}\n","// @flow\nimport React, { useState } from \"react\"\n\nimport Menu from \"@material-ui/core/Menu\"\nimport MenuItem from \"@material-ui/core/MenuItem\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport PersonIcon from \"@material-ui/icons/Person\"\nimport Typography from \"@material-ui/core/Typography\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport { Redirect } from \"react-router-dom\"\n\nimport { loadUser, logoutUser, isUserLoggedIn } from \"../models/user\"\n\nconst useStyles = makeStyles(theme => {\n  return {\n    icon: {\n      color: \"#fff !important\" // TODO: make this use theme\n    },\n    link: {\n      color: \"rgba(0, 0, 0, 0.87)\",\n      textDecoration: \"none\"\n    }\n  }\n})\n\nconst UserIcon = () => {\n  const [isOpen, setIsOpen] = useState(false)\n  const [anchorEl, setAnchorEl] = useState(null)\n\n  const user = loadUser()\n  const classes = useStyles()\n\n  const toggleOpen = event => {\n    setAnchorEl(event.currentTarget)\n    setIsOpen(!isOpen)\n  }\n\n  const onLogout = () => {\n    setIsOpen(!isOpen)\n    logoutUser()\n  }\n\n  if (!isUserLoggedIn()) {\n    return <Redirect to=\"/login\" />\n  }\n\n  return (\n    <React.Fragment>\n      <IconButton className={classes.icon} onClick={toggleOpen}>\n        <PersonIcon />\n        <Typography className={classes.icon} variant=\"subheading\">\n          {user.name}\n        </Typography>\n      </IconButton>\n      <Menu anchorEl={anchorEl} open={isOpen} onClose={toggleOpen}>\n        <MenuItem onClick={onLogout}>Logout</MenuItem>\n        <MenuItem>\n          <a\n            className={classes.link}\n            target=\"_blank\"\n            href=\"https://docs.ultralist.io\"\n          >\n            Docs\n          </a>\n        </MenuItem>\n        <MenuItem>\n          <a\n            className={classes.link}\n            target=\"_blank\"\n            href=\"mailto:hello@ultralist.io\"\n          >\n            {\" \"}\n            Email support{\" \"}\n          </a>\n        </MenuItem>\n      </Menu>\n    </React.Fragment>\n  )\n}\n\nexport default UserIcon\n","// @flow\nimport TodoItem from \"./todoItem\"\nimport utils from \"../utils\"\n\ntype ConstructorArgs = {\n  name: string,\n  todos: Array<TodoItem>\n}\n\nexport default class TodoListGroup {\n  name: string\n  uuid: string\n  todos: Array<TodoItem>\n\n  constructor(args: ConstructorArgs) {\n    this.name = args.name\n    this.uuid = utils.generateUuid()\n    this.todos = args.todos\n  }\n\n  sortedTodos(): Array<TodoItem> {\n    return this.todos.sort((t1, t2) => {\n      if (t1.isPriority) return -1\n      if (t2.isPriority) return 1\n      if (t1.dueDate() < t2.dueDate()) return 1\n      return -1\n    })\n  }\n}\n","// @flow\n\nimport TodoItemModel from \"../todoItem\"\nimport FilterModel from \"../filter\"\nimport {\n  differenceInDays,\n  addDays,\n  isSameDay,\n  isMonday,\n  isTuesday,\n  isWednesday,\n  isThursday,\n  isFriday,\n  isSaturday,\n  isSunday\n} from \"date-fns\"\n\nconst filterTodos = (\n  todos: Array<TodoItemModel>,\n  filter: FilterModel\n): Array<TodoItemModel> => {\n  const filterSubject = (subject: string | null, todo): boolean => {\n    if (!subject) return false\n    return todo.subject.toLowerCase().includes(subject.toLowerCase())\n  }\n\n  return todos.filter(todo => {\n    if (filter.contexts !== null)\n      if (filter.contexts.length === 0) {\n        if (todo.contexts.length > 0) return false\n      } else {\n        if (!filter.contexts.some(c => todo.contexts.includes(c))) return false\n      }\n\n    if (filter.projects !== null)\n      if (filter.projects.length === 0) {\n        if (todo.projects.length > 0) return false\n      } else {\n        if (!filter.projects.some(c => todo.projects.includes(c))) return false\n      }\n\n    if (filter.subjectContains)\n      if (!filterSubject(filter.subjectContains, todo)) return false\n\n    if (filter.archived !== null)\n      if (todo.archived !== filter.archived) return false\n\n    if (filter.isPriority !== null)\n      if (todo.isPriority !== filter.isPriority) return false\n\n    if (filter.completed !== null)\n      if (todo.completed !== filter.completed) return false\n\n    // for agenda filtering, we only want to see todos due today or are overdue\n    switch (filter.due) {\n      case \"agenda\":\n        if (todo.dueDate() !== null && todo.dueDate() > new Date()) return false\n        break\n      case \"nodue\":\n        if (todo.dueDate() !== null) return false\n        break\n      case \"overdue\":\n        if (todo.dueDate() === null) return false\n        if (todo.dueDate() !== null && todo.dueDate() >= new Date())\n          return false\n        break\n      case \"today\":\n        if (todo.dueDate() === null) return false\n        if (!isSameDay(todo.dueDate(), new Date())) return false\n        break\n      case \"tomorrow\":\n        if (todo.dueDate() === null) return false\n        if (!isSameDay(todo.dueDate(), addDays(new Date(), 1))) return false\n        break\n      case \"mon\":\n        if (todo.dueDate() === null) return false\n        if (differenceInDays(todo.dueDate(), new Date()) > 6) return false\n        if (!isMonday(todo.dueDate())) return false\n        break\n      case \"tue\":\n        if (todo.dueDate() === null) return false\n        if (differenceInDays(todo.dueDate(), new Date()) > 6) return false\n        if (!isTuesday(todo.dueDate())) return false\n        break\n      case \"wed\":\n        if (todo.dueDate() === null) return false\n        if (differenceInDays(todo.dueDate(), new Date()) > 6) return false\n        if (!isWednesday(todo.dueDate())) return false\n        break\n      case \"thu\":\n        if (todo.dueDate() === null) return false\n        if (differenceInDays(todo.dueDate(), new Date()) > 6) return false\n        if (!isThursday(todo.dueDate())) return false\n      case \"fri\":\n        if (todo.dueDate() === null) return false\n        if (differenceInDays(todo.dueDate(), new Date()) > 6) return false\n        if (!isFriday(todo.dueDate())) return false\n      case \"sat\":\n        if (todo.dueDate() === null) return false\n        if (differenceInDays(todo.dueDate(), new Date()) > 6) return false\n        if (!isSaturday(todo.dueDate())) return false\n      case \"sun\":\n        if (todo.dueDate() === null) return false\n        if (differenceInDays(todo.dueDate(), new Date()) > 6) return false\n        if (!isSunday(todo.dueDate())) return false\n        break\n    }\n\n    return true\n  })\n}\n\nexport default filterTodos\n","// @flow\nimport { BY_CONTEXT, BY_PROJECT } from \"../../constants\"\nimport TodoItemModel from \"../todoItem\"\nimport TodoListGroup from \"../todoListGroup\"\n\nconst applyGrouping = (\n  todos: Array<TodoItemModel>,\n  grouping: string | null\n): Array<TodoListGroup> => {\n  switch (grouping) {\n    case BY_CONTEXT:\n      return sort(byContext(todos))\n    case BY_PROJECT:\n      return sort(byProject(todos))\n    default:\n      return byAll(todos)\n  }\n}\n\nconst byContext = (todos: Array<TodoItemModel>): Array<TodoListGroup> => {\n  const grouped = []\n  getContexts(todos).forEach(context => {\n    grouped.push(\n      new TodoListGroup({\n        name: context,\n        todos: todosWithContext(todos, context)\n      })\n    )\n  })\n  return grouped\n}\n\nconst byProject = (todos: Array<TodoItemModel>): Array<TodoListGroup> => {\n  const grouped = []\n  getProjects(todos).forEach(project => {\n    grouped.push(\n      new TodoListGroup({\n        name: project,\n        todos: todosWithProject(todos, project)\n      })\n    )\n  })\n  return grouped\n}\n\nconst byAll = (todos: Array<TodoItemModel>): Array<TodoListGroup> => {\n  return [\n    new TodoListGroup({\n      name: \"All todos\",\n      todos: todos\n    })\n  ]\n}\n\nconst getContexts = (todos: Array<TodoItemModel>) => {\n  const contexts = []\n  todos.forEach(todo => {\n    todo.contexts.forEach(context => {\n      if (!contexts.includes(context)) contexts.push(context)\n    })\n    if (todo.contexts.length === 0 && !contexts.includes(\"No contexts\"))\n      contexts.push(\"No contexts\")\n  })\n  return contexts\n}\n\nconst todosWithContext = (todos: Array<TodoItemModel>, context: string) => {\n  const ret = []\n  todos.forEach(todo => {\n    if (todo.contexts.includes(context)) ret.push(todo)\n    if (context === \"No contexts\" && todo.contexts.length === 0) ret.push(todo)\n  })\n  return ret\n}\n\nconst sort = (groups: Array<TodoListGroup>): Array<TodoListGroup> => {\n  return groups.sort((g1, g2) => {\n    if (g1.name.toLowerCase() < g2.name.toLowerCase()) return -1\n    if (g1.name.toLowerCase() > g2.name.toLowerCase()) return 1\n    return 0\n  })\n}\n\nconst getProjects = (todos: Array<TodoItemModel>) => {\n  const projects = []\n  todos.forEach(todo => {\n    todo.projects.forEach(project => {\n      if (!projects.includes(project)) projects.push(project)\n    })\n    if (todo.projects.length === 0 && !projects.includes(\"No projects\"))\n      projects.push(\"No projects\")\n  })\n  return projects\n}\n\nconst todosWithProject = (todos: Array<TodoItemModel>, project: string) => {\n  const ret = []\n  todos.forEach(todo => {\n    if (todo.projects.includes(project)) ret.push(todo)\n    if (project === \"No projects\" && todo.projects.length === 0) ret.push(todo)\n  })\n  return ret\n}\n\nexport default applyGrouping\n","// @flow\nimport TodoItemModel from \"./todoItem\"\nimport TodoListGroup from \"./todoListGroup\"\nimport { FILTER_KEY } from \"../constants\"\n\nimport filterTodos from \"./logic/filterTodos\"\nimport applyGrouping from \"./logic/grouper\"\n\ntype ConstructorArgs = {\n  contexts?: Array<string>,\n  projects?: Array<string>,\n  subjectContains?: string,\n  archived?: boolean,\n  isPriority?: boolean,\n  completed?: boolean,\n  due?: string,\n  group?: string,\n  filterString?: string\n}\n\nexport default class Filter {\n  contexts: Array<string> | null\n  projects: Array<string> | null\n  subjectContains: string | null\n  archived: boolean | null\n  isPriority: boolean | null\n  completed: boolean | null\n  due: string | null\n  group: string | null\n\n  constructor(args: ConstructorArgs) {\n    this.contexts = args.contexts || null\n    this.projects = args.projects || null\n    this.subjectContains = args.subjectContains || null\n    this.archived = args.archived || null\n    this.isPriority = args.isPriority || null\n    this.completed = args.completed || null\n    this.due = args.due || null\n    this.group = args.group || null\n\n    if (args.isPriority === undefined) {\n      this.isPriority = null\n    } else {\n      this.isPriority = args.isPriority\n    }\n\n    if (args.completed === undefined) {\n      this.completed = null\n    } else {\n      this.completed = args.completed\n    }\n\n    if (args.archived === undefined) {\n      this.archived = null\n    } else {\n      this.archived = args.archived\n    }\n  }\n\n  toggleCompleted() {\n    if (this.completed) {\n      this.completed = !this.completed\n      return\n    }\n    this.completed = true\n  }\n\n  toggleUseCompleted() {\n    this.completed = this.completed === null ? true : null\n  }\n\n  toggleIsPriority() {\n    if (this.isPriority) {\n      this.isPriority = !this.isPriority\n      return\n    }\n    this.isPriority = true\n  }\n\n  toggleUseIsPriority() {\n    this.isPriority = this.isPriority === null ? true : null\n  }\n\n  toggleArchived() {\n    if (this.archived) {\n      this.archived = !this.archived\n      return\n    }\n    this.archived = true\n  }\n\n  toggleUseArchived() {\n    this.archived = this.archived === null ? true : null\n  }\n\n  addSubjectContains(s: string) {\n    if (this.subjectContains) {\n      this.subjectContains += ` ${s}`\n    } else {\n      this.subjectContains = s\n    }\n  }\n\n  applyFilter(todos: Array<TodoItemModel>): Array<TodoListGroup> {\n    const filteredTodos = filterTodos(todos, this)\n    return applyGrouping(filteredTodos, this.group)\n  }\n\n  toFilterStrings(): Array<string> {\n    const str = []\n    if (this.subjectContains) str.push(this.subjectContains)\n\n    if (this.archived === true) str.push(\"is:archived\")\n    if (this.archived === false) str.push(\"not:archived\")\n\n    if (this.isPriority === true) str.push(\"is:priority\")\n    if (this.isPriority === false) str.push(\"not:priority\")\n\n    if (this.completed === true) str.push(\"is:completed\")\n    if (this.completed === false) str.push(\"not:completed\")\n\n    if (this.due !== null) str.push(`due:${this.due}`)\n\n    return str\n  }\n\n  removeFilterString(str: string) {\n    switch (true) {\n      case str == \"is:archived\" || str == \"not:archived\":\n        this.archived = null\n        break\n      case str == \"is:priority\" || str == \"not:priority\":\n        this.isPriority = null\n        break\n      case str == \"is:completed\" || str == \"not:completed\":\n        this.completed = null\n        break\n      case str.startsWith(\"due:\"):\n        this.due = null\n        break\n      default:\n        this.subjectContains = null\n    }\n  }\n\n  save() {\n    window.localStorage.setItem(FILTER_KEY, JSON.stringify(this))\n  }\n\n  toJSON() {\n    return {\n      contexts: this.contexts,\n      projects: this.projects,\n      subjectContains: this.subjectContains,\n      archived: this.archived,\n      isPriority: this.isPriority,\n      completed: this.completed,\n      due: this.due,\n      group: this.group\n    }\n  }\n}\n\nexport const LoadFromStorage = (): Filter => {\n  const storedFilter = window.localStorage.getItem(FILTER_KEY)\n  if (!storedFilter) return new Filter({ archived: false, completed: false })\n  return new Filter(JSON.parse(storedFilter))\n}\n","// @flow\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\n\nimport Chip from \"@material-ui/core/Chip\"\n\nimport FilterModel from \"../../models/filter\"\n\ntype Props = {\n  currentFilter: FilterModel,\n  onChangeFilter: (f: FilterModel) => void\n}\n\nconst useStyles = makeStyles({\n  chip: {\n    margin: 3\n  }\n})\n\nconst FilterChips = (props: Props) => {\n  const classes = useStyles()\n\n  const removeFilterString = s => {\n    props.currentFilter.removeFilterString(s)\n    props.onChangeFilter(props.currentFilter)\n  }\n\n  return props.currentFilter\n    .toFilterStrings()\n    .map(s => (\n      <Chip\n        className={classes.chip}\n        key={s}\n        label={s}\n        onDelete={() => removeFilterString(s)}\n      />\n    ))\n}\n\nexport default FilterChips\n","// @flow\nimport React, { useState, useEffect } from \"react\"\nimport Button from \"@material-ui/core/Button\"\nimport { DatePicker, MuiPickersUtilsProvider } from \"material-ui-pickers\"\nimport DateFnsUtils from \"@date-io/date-fns\"\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\"\nimport Switch from \"@material-ui/core/Switch\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\n\nimport KeyboardIcon from \"@material-ui/icons/Keyboard\"\nimport LeftArrowIcon from \"@material-ui/icons/ArrowLeft\"\nimport RightArrowIcon from \"@material-ui/icons/ArrowRight\"\nimport red from \"@material-ui/core/colors/red\"\n\nimport TodoItemModel from \"../../../models/todoItem\"\n\ntype Props = {\n  todoItem: TodoItemModel,\n  title: string,\n  onChange: (todoItem: TodoItemModel) => void,\n  onDelete: (todoItem: TodoItemModel) => void\n}\n\nconst useStyles = makeStyles({\n  text: {\n    width: \"100%\",\n    maxWidth: \"500px\"\n  },\n  withMargin: {\n    marginTop: 20,\n    marginBottom: 20\n  },\n  red: {\n    color: \"white\",\n    backgroundColor: red[800],\n    \"&:hover\": {\n      backgroundColor: red[500]\n    }\n  }\n})\n\nconst subjectRef = React.createRef()\n\nconst Margin = props => {\n  const classes = useStyles()\n  return <div className={classes.withMargin}>{props.children}</div>\n}\n\nconst TodoForm = (props: Props) => {\n  const classes = useStyles()\n  const [todoItemAttrs, setTodoItem] = useState(props.todoItem.toJSON())\n  const todoItem = new TodoItemModel(todoItemAttrs)\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\n\n  const setTodoDate = (date: Date) => {\n    todoItem.setDue(date)\n    setTodoItem(todoItem)\n  }\n\n  const toggleIsPriority = () => {\n    todoItem.togglePriority()\n    setTodoItem(todoItem.toJSON())\n  }\n\n  const toggleArchived = () => {\n    todoItem.toggleArchived()\n    setTodoItem(todoItem)\n  }\n\n  const toggleCompleted = () => {\n    todoItem.toggleCompleted()\n    setTodoItem(todoItem)\n  }\n\n  const onChange = () => {\n    if (!isValid()) return\n\n    if (todoItem.subject !== subjectRef.current.value) {\n      todoItem.setSubject(subjectRef.current.value)\n      setTodoItem(todoItem)\n    }\n\n    props.onChange(todoItem)\n  }\n\n  const onShowDeleteDialog = () => {\n    setShowDeleteDialog(true)\n  }\n\n  const onCloseDeleteDialog = () => {\n    setShowDeleteDialog(false)\n  }\n\n  const onDelete = () => {\n    setShowDeleteDialog(false)\n    props.onDelete(todoItem)\n  }\n\n  const isValid = () => {\n    if (!subjectRef.current) return true\n    return subjectRef.current.value !== \"\"\n  }\n\n  const onKeypress = event => {\n    if (event.keyCode === 13) onChange()\n  }\n\n  useEffect(() => {\n    subjectRef.current.addEventListener(\"keypress\", onKeypress)\n\n    return () => {\n      subjectRef.current.removeEventListener(\"keypress\", onKeypress)\n    }\n  }, [])\n\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <DialogTitle>{props.title}</DialogTitle>\n      <DialogContent>\n        <Margin>\n          <TextField\n            error={!isValid()}\n            className={classes.text}\n            defaultValue={todoItem.subject}\n            label=\"Description\"\n            autoFocus\n            inputRef={subjectRef}\n          />\n        </Margin>\n\n        <Margin>\n          <DatePicker\n            autoOk\n            keyboardIcon={<KeyboardIcon />}\n            leftArrowIcon={<LeftArrowIcon />}\n            rightArrowIcon={<RightArrowIcon />}\n            label=\"Due\"\n            clearable\n            value={todoItem.dueDate()}\n            onChange={setTodoDate}\n          />\n        </Margin>\n\n        <Margin>\n          <FormControlLabel\n            control={\n              <Switch onChange={toggleCompleted} checked={todoItem.completed} />\n            }\n            label=\"Completed\"\n          />\n          <FormControlLabel\n            control={\n              <Switch\n                onChange={toggleIsPriority}\n                checked={todoItem.isPriority}\n              />\n            }\n            label=\"Priority\"\n          />\n          <FormControlLabel\n            control={\n              <Switch onChange={toggleArchived} checked={todoItem.archived} />\n            }\n            label=\"Archived\"\n          />\n        </Margin>\n        <Button className={classes.red} onClick={onShowDeleteDialog}>\n          Delete this todo\n        </Button>\n        <Dialog open={showDeleteDialog} onClose={onCloseDeleteDialog}>\n          <DialogTitle>Delete this todo?</DialogTitle>\n          <DialogActions>\n            <Button onClick={onDelete}>Delete</Button>\n            <Button onClick={onCloseDeleteDialog}>Cancel</Button>\n          </DialogActions>\n        </Dialog>\n      </DialogContent>\n\n      <DialogActions>\n        <Button color=\"primary\" onClick={onChange}>\n          Submit\n        </Button>\n      </DialogActions>\n    </MuiPickersUtilsProvider>\n  )\n}\n\nexport default TodoForm\n","// @flow\nimport React, { useState, useEffect } from \"react\"\nimport { makeStyles } from \"@material-ui/styles\"\n\nimport Fab from \"@material-ui/core/Fab\"\nimport AddIcon from \"@material-ui/icons/Add\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport Tooltip from \"@material-ui/core/Tooltip\"\n\nimport Storage from \"../../backend/storage\"\nimport TodoForm from \"../todoItem/styled/todoForm\"\nimport TodoItemModel from \"../../models/todoItem\"\n\ntype Props = {\n  onAddTodoItem: (todoItem: TodoItemModel) => void\n}\n\nconst useStyles = makeStyles({\n  fab: {\n    position: \"fixed\",\n    zIndex: 1101,\n    bottom: 30,\n    left: 0,\n    right: 0,\n    margin: \"0 auto\"\n  }\n})\n\nconst AddTodo = (props: Props) => {\n  const storage = new Storage()\n  const classes = useStyles()\n  const [modalOpen, setModalOpen] = useState(false)\n  const todoItem = new TodoItemModel({})\n\n  storage.setModalIsOpen(modalOpen)\n\n  const toggleModalOpen = () => {\n    setModalOpen(!modalOpen)\n  }\n\n  const onChange = (todoItem: TodoItemModel) => {\n    setModalOpen(false)\n    props.onAddTodoItem(todoItem)\n  }\n\n  const onKeypress = event => {\n    if (event.keyCode === 97 && !storage.isModalOpen()) {\n      setTimeout(() => setModalOpen(true), 10)\n    }\n    return false\n  }\n\n  useEffect(() => {\n    document.addEventListener(\"keypress\", onKeypress)\n\n    return () => {\n      document.removeEventListener(\"keypress\", onKeypress)\n    }\n  }, [])\n\n  return (\n    <React.Fragment>\n      <Fab onClick={toggleModalOpen} className={classes.fab}>\n        <Tooltip disableFocusListener={true} title=\"Create new todo\">\n          <AddIcon />\n        </Tooltip>\n      </Fab>\n      <Dialog\n        fullWidth\n        maxWidth=\"sm\"\n        open={modalOpen}\n        onClose={toggleModalOpen}\n      >\n        <TodoForm title=\"Add todo\" todoItem={todoItem} onChange={onChange} />\n      </Dialog>\n    </React.Fragment>\n  )\n}\n\nexport default AddTodo\n","// @flow\nimport React from \"react\"\nimport { format, isSameDay, addDays, toDate, isBefore } from \"date-fns\"\n\ntype Props = {\n  date: string | null,\n  grey: boolean,\n  classes: {\n    past: string,\n    today: string,\n    tomorrow: string,\n    future: string,\n    grey: string\n  }\n}\n\nconst isYesterday = (date: Date): boolean => {\n  return isSameDay(date, addDays(new Date(), -1))\n}\n\nconst isToday = (date: Date): boolean => {\n  return isSameDay(date, new Date())\n}\n\nconst isTomorrow = (date: Date): boolean => {\n  return isSameDay(date, addDays(new Date(), 1))\n}\n\nconst DueDate = (props: Props) => {\n  if (props.date === null) return null\n\n  const formattedDate = format(props.date, \"MMM do\")\n  const realDate = toDate(props.date)\n  const grey = props.classes.grey\n\n  if (isYesterday(realDate)) {\n    return (\n      <span className={props.grey ? grey : props.classes.past}>Yesterday</span>\n    )\n  }\n\n  if (isToday(realDate)) {\n    return (\n      <span className={props.grey ? grey : props.classes.today}>Today</span>\n    )\n  }\n\n  if (isBefore(realDate, new Date())) {\n    return (\n      <span className={props.grey ? grey : props.classes.past}>\n        {formattedDate}\n      </span>\n    )\n  }\n\n  if (isTomorrow(realDate)) {\n    return (\n      <span className={props.grey ? grey : props.classes.tomorrow}>\n        Tomorrow\n      </span>\n    )\n  }\n\n  return (\n    <span className={props.grey ? grey : props.classes.future}>\n      {formattedDate}\n    </span>\n  )\n}\n\nexport default DueDate\n","// @flow\nimport { withStyles } from \"@material-ui/core/styles\"\nimport red from \"@material-ui/core/colors/red\"\nimport blue from \"@material-ui/core/colors/blue\"\n\nimport DueDate from \"../basic/dueDate\"\n\nconst styles = () => ({\n  past: {\n    color: red[700]\n  },\n  today: {\n    color: blue[500]\n  },\n  tomorrow: {\n    color: blue[400]\n  },\n  future: {\n    color: blue[300]\n  },\n  grey: {\n    color: \"#aaa\"\n  }\n})\n\nexport default withStyles(styles)(DueDate)\n","// @flow\nimport React from \"react\"\n\ntype Props = {\n  val: string,\n  strike: boolean,\n  grey: boolean,\n  bold: boolean,\n  onClick: (str: string) => void,\n  classes: {\n    project: string,\n    context: string,\n    strike: string,\n    grey: string,\n    bold: string\n  }\n}\n\nconst isProject = word => {\n  return word.startsWith(\"+\")\n}\n\nconst isContext = word => {\n  return word.startsWith(\"@\")\n}\n\nconst TodoText = (props: Props) => {\n  const words = props.val.split(\" \")\n\n  const parsedWords = words.map((word, i) => {\n    word = word + \" \"\n\n    if (isContext(word)) {\n      return (\n        <a\n          key={i}\n          className={props.grey ? null : props.classes.context}\n          onClick={() => props.onClick(word.trim())}\n        >\n          {word}\n        </a>\n      )\n    } else if (isProject(word)) {\n      return (\n        <a\n          key={i}\n          className={props.grey ? null : props.classes.project}\n          onClick={() => props.onClick(word.trim())}\n        >\n          {word}\n        </a>\n      )\n    } else {\n      return word\n    }\n  })\n\n  const classNames = []\n  if (props.strike) classNames.push(props.classes.strike)\n  if (props.grey) classNames.push(props.classes.grey)\n  if (props.bold) classNames.push(props.classes.bold)\n\n  return <span className={classNames.join(\" \")}>{parsedWords}</span>\n}\n\nexport default TodoText\n","// @flow\n\nimport { withStyles } from \"@material-ui/core/styles\"\nimport red from \"@material-ui/core/colors/red\"\nimport blue from \"@material-ui/core/colors/blue\"\n\nimport TodoText from \"../basic/todoText\"\n\nconst styles = () => ({\n  project: {\n    color: red[500],\n    cursor: \"pointer\"\n  },\n  context: {\n    color: blue[500],\n    cursor: \"pointer\"\n  },\n  strike: {\n    textDecoration: \"line-through\"\n  },\n  grey: {\n    color: \"#aaa\"\n  },\n  bold: {\n    fontWeight: \"bold\"\n  }\n})\n\nexport default withStyles(styles)(TodoText)\n","// @flow\nimport React from \"react\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport TodayIcon from \"@material-ui/icons/Today\"\nimport Menu from \"@material-ui/core/Menu\"\nimport MenuItem from \"@material-ui/core/MenuItem\"\n\nimport TodoItemModel from \"../../../models/todoItem\"\n\ntype Props = {\n  todoItem: TodoItemModel,\n  onChange: (todoItem: TodoItemModel) => void\n}\n\nconst SetDueButton = (props: Props) => {\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const [isOpen, setIsOpen] = React.useState(false)\n\n  const onOpenMenu = (event: Event) => {\n    setAnchorEl(event.currentTarget)\n    setIsOpen(true)\n  }\n\n  const onCloseMenu = () => {\n    setIsOpen(false)\n    setAnchorEl(null)\n  }\n\n  const setDueToday = () => {\n    props.todoItem.setDueToday()\n    onCloseMenu()\n    props.onChange(props.todoItem)\n  }\n\n  const setDueTomorrow = () => {\n    props.todoItem.setDueTomorrow()\n    onCloseMenu()\n    props.onChange(props.todoItem)\n  }\n\n  const setDueMonday = () => {\n    props.todoItem.setDueMonday()\n    onCloseMenu()\n    props.onChange(props.todoItem)\n  }\n\n  return (\n    <React.Fragment>\n      <IconButton onClick={onOpenMenu} aria-label=\"Due Today\">\n        <TodayIcon />\n      </IconButton>\n      <Menu anchorEl={anchorEl} open={isOpen} onClose={onCloseMenu}>\n        <MenuItem onClick={setDueToday}>Due Today</MenuItem>\n        <MenuItem onClick={setDueTomorrow}>Due Tomorrow</MenuItem>\n        <MenuItem onClick={setDueMonday}>Due Monday</MenuItem>\n      </Menu>\n    </React.Fragment>\n  )\n}\n\nexport default SetDueButton\n","// @flow\nimport React from \"react\"\n\nimport Collapse from \"@material-ui/core/Collapse\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Typography from \"@material-ui/core/Typography\"\nimport { withStyles } from \"@material-ui/core/styles\"\n\nimport DeleteForever from \"@material-ui/icons/DeleteForever\"\n\nimport TodoItemNoteModel from \"../../../models/todoItemNote\"\n\ntype Props = {\n  note: string,\n  onDeleteNote: string => void,\n  classes: {\n    notesAreaItem: string,\n    noteText: string\n  }\n}\n\nconst styles = theme => ({\n  notesAreaItem: {\n    borderTop: \"1px solid #ddd\",\n    listStyleType: \"none\",\n    display: \"flex\",\n    \"&:first-child\": {\n      borderTop: \"none\"\n    }\n  },\n  noteText: {\n    display: \"inline\",\n    flex: 1,\n    paddingTop: 15\n  }\n})\n\nconst TodoItemNote = (props: Props) => {\n  const onDelete = () => {\n    // if (confirm(\"Are you sure you wish to delete this note?\")) {\n    //   props.onDeleteNote(props.note)\n    // }\n  }\n\n  return (\n    <li className={props.classes.notesAreaItem}>\n      <Typography variant=\"body1\" className={props.classes.noteText}>\n        <span>{props.note}</span>\n      </Typography>\n      <IconButton onClick={onDelete} aria-label=\"Show notes\">\n        <DeleteForever />\n      </IconButton>\n    </li>\n  )\n}\n\nexport default withStyles(styles)(TodoItemNote)\n","// @flow\nimport React from \"react\"\n\nimport Dialog from \"@material-ui/core/Dialog\"\n\nimport TodoItemModel from \"../../../models/todoItem\"\nimport TodoForm from \"../../todoItem/styled/todoForm\"\n\ntype Props = {\n  todoItem: TodoItemModel,\n  show: boolean,\n  onClose: () => void,\n  onEditTodo: (todoItem: TodoItemModel) => void,\n  onDeleteTodo: (todoItem: TodoItemModel) => void\n}\n\nconst EditTodo = (props: Props) => {\n  const onChange = (todoItem: TodoItemModel) => {\n    props.onClose()\n    props.onEditTodo(todoItem)\n  }\n\n  const onDelete = (todoItem: TodoItemModel) => {\n    props.onClose()\n    props.onDeleteTodo(todoItem)\n  }\n\n  return (\n    <Dialog fullWidth maxWidth=\"sm\" open={props.show} onClose={props.onClose}>\n      <TodoForm\n        title=\"Edit todo\"\n        todoItem={props.todoItem}\n        onChange={onChange}\n        onDelete={onDelete}\n      />\n    </Dialog>\n  )\n}\n\nexport default EditTodo\n","// @flow\nimport React, { useState, useEffect } from \"react\"\n\nimport { withStyles } from \"@material-ui/core/styles\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\"\nimport Checkbox from \"@material-ui/core/Checkbox\"\nimport StarBorder from \"@material-ui/icons/StarBorder\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport Star from \"@material-ui/icons/Star\"\nimport Collapse from \"@material-ui/core/Collapse\"\n\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\"\nimport ArchiveIcon from \"@material-ui/icons/Archive\"\nimport UnarchiveIcon from \"@material-ui/icons/Unarchive\"\n\nimport yellow from \"@material-ui/core/colors/yellow\"\n\nimport Storage from \"../../../backend/storage\"\nimport TodoItemModel from \"../../../models/todoItem\"\n\nimport DueDate from \"./dueDate\"\nimport TodoText from \"./todoText\"\nimport SetDueButton from \"./setDueButton\"\nimport TodoItemNote from \"./todoItemNote\"\nimport EditTodo from \"./editTodo\"\n\ntype Props = {\n  todoItem: TodoItemModel,\n  isSelected: boolean,\n  isFirst: boolean,\n  onChange: (todoItem: TodoItemModel) => void,\n  onDelete: (todoItem: TodoItemModel) => void,\n  onSubjectClick: (str: string) => void,\n  showEditTodo: boolean,\n  classes: {\n    shortWidthHide: string,\n    shortWidthShow: string,\n    starIcon: string,\n    notesArea: string,\n    paper: string,\n    listItem: string,\n    selectedListItem: string\n  }\n}\n\nconst styles = theme => ({\n  shortWidthHide: {\n    [theme.breakpoints.down(700 + theme.spacing.unit * 3 * 2)]: {\n      display: \"none\"\n    },\n    [theme.breakpoints.up(700 + theme.spacing.unit * 3 * 2)]: {\n      display: \"block\"\n    }\n  },\n  shortWidthShow: {\n    [theme.breakpoints.down(700 + theme.spacing.unit * 3 * 2)]: {\n      display: \"block\"\n    },\n    [theme.breakpoints.up(700 + theme.spacing.unit * 3 * 2)]: {\n      display: \"none\"\n    }\n  },\n  todo: {\n    [theme.breakpoints.down(700 + theme.spacing.unit * 3 * 2)]: {},\n    [theme.breakpoints.up(700 + theme.spacing.unit * 3 * 2)]: {\n      maxWidth: 1200\n    },\n    backgroundColor: \"#fff\",\n    borderTop: \"1px solid #eee\"\n  },\n  firstTodo: {\n    [theme.breakpoints.down(700 + theme.spacing.unit * 3 * 2)]: {},\n    [theme.breakpoints.up(700 + theme.spacing.unit * 3 * 2)]: {\n      maxWidth: 1200\n    },\n    backgroundColor: \"#fff\"\n  },\n  starIcon: {\n    color: yellow[800]\n  },\n  notesArea: {\n    backgroundColor: \"#efefef\",\n    marginLeft: 40,\n    marginBottom: 20\n  }\n})\n\nconst TodoItem = (props: Props) => {\n  const storage = new Storage()\n\n  const [todoItemAttrs, setTodoItemAttrs] = useState(props.todoItem.toJSON())\n  const todoItem = new TodoItemModel(todoItemAttrs)\n\n  const [showNotes, setShowNotes] = useState(false)\n  const [showEditTodo, setShowEditTodo] = useState(false)\n\n  storage.setModalIsOpen(showEditTodo)\n\n  const toggleShowEditTodo = () => {\n    setShowEditTodo(!showEditTodo)\n  }\n\n  const toggleComplete = () => {\n    todoItem.toggleCompleted()\n    onChangeTodo(todoItem)\n  }\n\n  const togglePriority = () => {\n    todoItem.togglePriority()\n    onChangeTodo(todoItem)\n  }\n\n  const deleteNote = note => {\n    todoItem.deleteNote(note)\n    onChangeTodo(todoItem)\n  }\n\n  const toggleArchived = () => {\n    todoItem.toggleArchived()\n    onChangeTodo(todoItem)\n  }\n\n  const toggleShowNotes = () => {\n    setShowNotes(!showNotes)\n  }\n\n  const onChangeTodo = todoItem => {\n    setTodoItemAttrs(todoItem.toJSON())\n    props.onChange(todoItem)\n  }\n\n  const notes = () => {\n    return todoItem.notes.map(n => (\n      <React.Fragment key={n}>\n        <TodoItemNote note={n} onDeleteNote={deleteNote} />\n      </React.Fragment>\n    ))\n  }\n\n  const ArchiveButton = props => (\n    <IconButton onClick={props.onClick}>\n      <ArchiveIcon />\n    </IconButton>\n  )\n\n  const UnarchiveButton = props => (\n    <IconButton onClick={props.onClick}>\n      <UnarchiveIcon />\n    </IconButton>\n  )\n\n  const firstButton = () => {\n    if (todoItem.completed) {\n      if (todoItem.archived) {\n        return <UnarchiveButton onClick={toggleArchived} />\n      } else {\n        return <ArchiveButton onClick={toggleArchived} />\n      }\n    } else {\n      if (todoItem.archived) {\n        return <UnarchiveButton onClick={toggleArchived} />\n      } else {\n        return <SetDueButton todoItem={todoItem} onChange={onChangeTodo} />\n      }\n    }\n  }\n\n  const onKeypress = event => {\n    if (!props.isSelected || storage.isModalOpen()) return\n\n    if (event.keyCode === 13) setShowEditTodo(true)\n    if (event.keyCode === 99) toggleComplete()\n    if (event.keyCode === 112) togglePriority()\n    if (event.keyCode === 65) toggleArchived()\n  }\n\n  useEffect(() => {\n    document.addEventListener(\"keypress\", onKeypress)\n\n    return () => {\n      document.removeEventListener(\"keypress\", onKeypress)\n    }\n  }, [])\n\n  return (\n    <ListItem\n      key={todoItem.id}\n      className={props.isFirst ? props.classes.firstTodo : props.classes.todo}\n    >\n      <Checkbox\n        tabIndex={-1}\n        checked={todoItem.completed}\n        onChange={toggleComplete}\n      />\n\n      <IconButton\n        onClick={togglePriority}\n        className={props.classes.shortWidthHide}\n        aria-label=\"Prioritize\"\n      >\n        {todoItem.isPriority ? (\n          <Star className={props.classes.starIcon} />\n        ) : (\n          <StarBorder />\n        )}\n      </IconButton>\n\n      <ListItemText\n        onClick={toggleShowEditTodo}\n        primary={\n          <TodoText\n            bold={todoItem.isPriority}\n            strike={todoItem.completed}\n            grey={todoItem.archived}\n            val={todoItem.subject}\n            onClick={props.onSubjectClick}\n          />\n        }\n        secondary={\n          <DueDate\n            grey={todoItem.archived || todoItem.completed}\n            date={todoItem.dueDate()}\n          />\n        }\n      />\n\n      <Collapse in={showNotes} timeout=\"auto\" unmountOnExit>\n        <ul className={props.classes.notesArea}> {notes()} </ul>\n      </Collapse>\n\n      <EditTodo\n        show={showEditTodo}\n        onClose={toggleShowEditTodo}\n        todoItem={todoItem}\n        onEditTodo={onChangeTodo}\n        onDeleteTodo={props.onDelete}\n      />\n      <ListItemSecondaryAction>\n        <div className={props.classes.shortWidthHide}>\n          {firstButton()}\n\n          <IconButton onClick={toggleShowNotes} aria-label=\"Show Notes\">\n            {showNotes ? <ExpandMoreIcon /> : <ExpandLessIcon />}\n          </IconButton>\n        </div>\n      </ListItemSecondaryAction>\n    </ListItem>\n  )\n}\n\nexport default withStyles(styles)(TodoItem)\n","// @flow\nimport React from \"react\"\n\nimport List from \"@material-ui/core/List\"\nimport ListSubheader from \"@material-ui/core/ListSubheader\"\n\nimport TodoItemModel from \"../../models/todoItem\"\nimport TodoListGroup from \"../../models/todoListGroup\"\n\nimport TodoItem from \"../todoItem/styled/todoItem\"\nimport { makeStyles } from \"@material-ui/styles\"\n\ntype Props = {\n  group: TodoListGroup,\n  selectedTodoUUID: string,\n  onChange: (todoItem: TodoItemModel) => void,\n  onDelete: (todoItem: TodoItemModel) => void,\n  onSubjectClick: (str: string) => void\n}\n\nconst useStyles = makeStyles({\n  list: {\n    margin: \"auto\",\n    width: \"calc(100vw - 15px)\",\n    maxWidth: 1200,\n  }\n})\n\nconst TodoGroup = (props: Props) => {\n  const classes = useStyles()\n  const todos = props.group.sortedTodos()\n  return (\n    <List\n      className={classes.list}\n      subheader={\n        <ListSubheader className={classes.subheader} component=\"div\">\n          {props.group.name}\n        </ListSubheader>\n      }\n    >\n      {todos.map(todo => (\n        <React.Fragment key={todo.uuid}>\n          <TodoItem\n            isFirst={todo.uuid == todos[0].uuid}\n            isSelected={todo.uuid === props.selectedTodoUUID}\n            onChange={props.onChange}\n            onDelete={props.onDelete}\n            onSubjectClick={props.onSubjectClick}\n            todoItem={todo}\n          />\n        </React.Fragment>\n      ))}\n    </List>\n  )\n}\n\nexport default TodoGroup\n","// @flow\nimport React, { useState } from \"react\"\nimport Menu from \"@material-ui/core/Menu\"\nimport MenuItem from \"@material-ui/core/MenuItem\"\nimport Button from \"@material-ui/core/Button\"\n\nimport FilterModel from \"../../models/filter\"\n\nimport { BY_ALL, BY_CONTEXT, BY_PROJECT } from \"../../constants\"\n\ntype Props = {\n  currentFilter: FilterModel,\n  onChangeFilter: (f: FilterModel) => void\n}\n\nconst GroupingMenu = (props: Props) => {\n  const [anchorEl, setAnchorEl] = useState(null)\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  const onChooseGrouping = (group: string) => {\n    handleClose()\n    props.currentFilter.group = group\n    props.onChangeFilter(props.currentFilter)\n  }\n\n  return (\n    <React.Fragment>\n      <Button color=\"inherit\" onClick={handleClick}>\n        Group\n      </Button>\n      <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={handleClose}>\n        <MenuItem onClick={onChooseGrouping.bind(this, BY_ALL)}>\n          No grouping\n        </MenuItem>\n        <MenuItem onClick={onChooseGrouping.bind(this, BY_CONTEXT)}>\n          By Context\n        </MenuItem>\n        <MenuItem onClick={onChooseGrouping.bind(this, BY_PROJECT)}>\n          By Project\n        </MenuItem>\n      </Menu>\n    </React.Fragment>\n  )\n}\n\nexport default GroupingMenu\n","// @flow\nimport React, { useState, useEffect } from \"react\"\n\nimport Button from \"@material-ui/core/Button\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\"\nimport Input from \"@material-ui/core/Input\"\nimport InputLabel from \"@material-ui/core/InputLabel\"\nimport Divider from \"@material-ui/core/Divider\"\nimport Select from \"@material-ui/core/Select\"\nimport MenuItem from \"@material-ui/core/MenuItem\"\nimport Checkbox from \"@material-ui/core/Checkbox\"\nimport Switch from \"@material-ui/core/Switch\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport TextField from \"@material-ui/core/TextField\"\nimport { makeStyles } from \"@material-ui/styles\"\n\nimport FilterModel from \"../../models/filter\"\nimport FilterChips from \"../todoList/filterChips\"\nimport Storage from \"../../backend/storage\"\n\ntype Props = {\n  currentFilter: FilterModel,\n  onChangeFilter: (f: FilterModel) => void\n}\n\nconst useStyles = makeStyles({\n  searchBoxOuter: {\n    margin: 20\n  },\n  searchBox: {\n    width: \"90%\"\n  },\n  dueLabel: {\n    margin: 15\n  }\n})\n\nconst FilterDialog = (props: Props) => {\n  const storage = new Storage()\n  const classes = useStyles()\n  const [isOpen, setIsOpen] = useState(false)\n\n  const [currentFilterAttrs, setCurrentFilter] = useState(\n    props.currentFilter.toJSON()\n  )\n\n  useEffect(() => {\n    setCurrentFilter(props.currentFilter.toJSON())\n  }, [props.currentFilter])\n\n  const currentFilter = new FilterModel(currentFilterAttrs)\n\n  storage.setModalIsOpen(isOpen)\n\n  const toggleOpen = () => {\n    setIsOpen(!isOpen)\n  }\n\n  const changeSearchStringEvent = (ev: Event) => {\n    ev.preventDefault()\n    currentFilter.subjectContains = ev.target.value\n    update()\n    setCurrentFilter(currentFilter.toJSON())\n    props.onChangeFilter(currentFilter)\n  }\n\n  const update = () => {\n    setCurrentFilter(currentFilter.toJSON())\n    props.onChangeFilter(currentFilter)\n  }\n\n  const onChangeCompleted = () => {\n    currentFilter.toggleCompleted()\n    update()\n  }\n\n  const onToggleUseCompleted = () => {\n    currentFilter.toggleUseCompleted()\n    update()\n  }\n\n  const onChangeIsPriority = () => {\n    currentFilter.toggleIsPriority()\n    update()\n  }\n\n  const onToggleUseIsPriority = () => {\n    currentFilter.toggleUseIsPriority()\n    update()\n  }\n\n  const onChangeArchived = () => {\n    currentFilter.toggleArchived()\n    update()\n  }\n\n  const onChangeDue = event => {\n    currentFilter.due = event.target.value\n    if (event.target.value === \"none\") currentFilter.due = null\n    update()\n  }\n\n  const onToggleUseArchived = () => {\n    currentFilter.toggleUseArchived()\n    update()\n  }\n\n  return (\n    <React.Fragment>\n      <Button onClick={toggleOpen} color=\"inherit\">\n        Filter\n      </Button>\n      <Dialog fullWidth maxWidth=\"sm\" onClose={toggleOpen} open={isOpen}>\n        <DialogTitle>Filter your list</DialogTitle>\n\n        <div className={classes.searchBoxOuter}>\n          <FilterChips currentFilter={currentFilter} onChangeFilter={update} />\n\n          <TextField\n            id=\"outlined-search\"\n            label=\"Subject\"\n            type=\"search\"\n            className={classes.searchBox}\n            margin=\"dense\"\n            autoComplete=\"off\"\n            value={currentFilter.subjectContains || \"\"}\n            onChange={changeSearchStringEvent}\n          />\n\n          <FormControlLabel\n            control={\n              <React.Fragment>\n                <Checkbox\n                  checked={currentFilter.completed !== null}\n                  onChange={onToggleUseCompleted}\n                />\n                <Switch\n                  checked={currentFilter.completed === true}\n                  onChange={onChangeCompleted}\n                />\n              </React.Fragment>\n            }\n            label=\"Is Completed\"\n          />\n          <br />\n          <FormControlLabel\n            control={\n              <React.Fragment>\n                <Checkbox\n                  checked={currentFilter.isPriority !== null}\n                  onChange={onToggleUseIsPriority}\n                />\n                <Switch\n                  checked={currentFilter.isPriority === true}\n                  onChange={onChangeIsPriority}\n                />\n              </React.Fragment>\n            }\n            label=\"Is Priority\"\n          />\n          <br />\n          <FormControlLabel\n            control={\n              <React.Fragment>\n                <Checkbox\n                  checked={currentFilter.archived !== null}\n                  onChange={onToggleUseArchived}\n                />\n                <Switch\n                  checked={currentFilter.archived === true}\n                  onChange={onChangeArchived}\n                />\n              </React.Fragment>\n            }\n            label=\"Is Archived\"\n          />\n          <br />\n          <FormControlLabel\n            control={\n              <React.Fragment>\n                <InputLabel className={classes.dueLabel} htmlFor=\"due\">\n                  Due\n                </InputLabel>\n                <Select\n                  value={currentFilter.due || \"none\"}\n                  onChange={onChangeDue}\n                  input={<Input name=\"due\" id=\"due\" />}\n                >\n                  <MenuItem value=\"none\">No due filter</MenuItem>\n                  <MenuItem value=\"nodue\">No date set</MenuItem>\n                  <Divider />\n                  <MenuItem value=\"agenda\">Agenda</MenuItem>\n                  <MenuItem value=\"overdue\">Overdue</MenuItem>\n                  <Divider />\n                  <MenuItem value=\"today\">today</MenuItem>\n                  <MenuItem value=\"tomorrow\">tomorrow</MenuItem>\n                  <Divider />\n                  <MenuItem value=\"mon\">Monday</MenuItem>\n                  <MenuItem value=\"tue\">Tuesday</MenuItem>\n                  <MenuItem value=\"wed\">Wednesday</MenuItem>\n                  <MenuItem value=\"thu\">Thursday</MenuItem>\n                  <MenuItem value=\"fri\">Friday</MenuItem>\n                  <MenuItem value=\"sat\">Saturday</MenuItem>\n                  <MenuItem value=\"sun\">Sunday</MenuItem>\n                </Select>\n              </React.Fragment>\n            }\n          />\n        </div>\n\n        <DialogActions>\n          <Button color=\"primary\" onClick={toggleOpen}>\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n  )\n}\n\nexport default FilterDialog\n","// @flow\nimport React from \"react\"\n\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport Button from \"@material-ui/core/Button\"\nimport { makeStyles } from \"@material-ui/styles\"\n\nimport FilterModel from \"../models/filter\"\n\nimport GroupingMenu from \"./bottomBar/groupingMenu\"\nimport FilterDialog from \"./bottomBar/filterDialog\"\n\nconst useStyles = makeStyles({\n  root: {\n    flexGrow: 1\n  },\n  right: {\n    justifyContent: \"flex-end\"\n  },\n  grow: {\n    flexGrow: 1\n  },\n  appBar: {\n    top: \"auto\",\n    bottom: 0\n  }\n})\n\ntype Props = {\n  currentFilter: FilterModel,\n  onChangeFilter: (f: FilterModel) => void\n}\n\nconst BottomBar = (props: Props) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.appBar}>\n        <Toolbar className={classes.right}>\n          <FilterDialog\n            currentFilter={props.currentFilter}\n            onChangeFilter={props.onChangeFilter}\n          />\n          <GroupingMenu\n            currentFilter={props.currentFilter}\n            onChangeFilter={props.onChangeFilter}\n          />\n          <div className={classes.grow} />\n          <Button color=\"inherit\">Views</Button>\n        </Toolbar>\n      </AppBar>\n    </div>\n  )\n}\n\nexport default BottomBar\n","// @flow\nimport React, { useState, useEffect } from \"react\"\n\nimport Typography from \"@material-ui/core/Typography\"\nimport { makeStyles } from \"@material-ui/styles\"\nimport { withSnackbar } from \"notistack\"\n\nimport Storage from \"../../backend/storage\"\nimport TodoItemModel from \"../../models/todoItem\"\nimport TodoListModel from \"../../models/todoList\"\nimport FilterModel, { LoadFromStorage } from \"../../models/filter\"\nimport FilterChips from \"./filterChips\"\n\nimport AddTodo from \"./addTodo\"\nimport TodoGroup from \"./todoGroup\"\nimport BottomBar from \"../bottomBar\"\n\ntype Props = {\n  todoList: TodoListModel,\n  onAddTodoItem: (todoItem: TodoItemModel) => void,\n  onChangeTodoItem: (todoItem: TodoItemModel) => void,\n  onDeleteTodoItem: (todoItem: TodoItemModel) => void\n}\n\nconst useStyles = makeStyles({\n  hidden: {\n    display: \"none\"\n  },\n  toggleContainer: {\n    height: 56,\n    padding: \"8px 16px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-start\",\n    margin: \"8px 0\",\n    minWidth: 300\n  },\n  controls: {\n    marginLeft: 20,\n    minWidth: 300\n  },\n  listContainer: {\n    paddingTop: 70,\n    paddingBottom: 70\n  },\n  listName: {\n    textAlign: \"center\",\n    marginTop: 20\n  },\n  filterChips: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    flexWrap: \"wrap\"\n  }\n})\n\nconst TodoList = (props: Props) => {\n  const classes = useStyles()\n  const storage = new Storage()\n  const [filterModelAttrs, setFilterModelAttrs] = useState(LoadFromStorage())\n  const filterModel = new FilterModel(filterModelAttrs)\n  const [selectedTodoUUID, setSelectedTodoUUID] = useState(null)\n\n  const groups = filterModel.applyFilter(props.todoList.todos)\n\n  const onAddTodo = (todo: TodoItemModel) => {\n    props.todoList.addTodo(todo)\n    props.enqueueSnackbar(\"Todo Added.\")\n    props.onAddTodoItem(todo)\n  }\n\n  const onChangeTodo = (todo: TodoItemModel) => {\n    props.onChangeTodoItem(todo)\n    props.todoList.updateTodo(todo)\n    props.enqueueSnackbar(\"Todo updated.\")\n  }\n\n  const onDeleteTodo = (todo: TodoItemModel) => {\n    props.todoList.deleteTodo(todo)\n    props.enqueueSnackbar(\"Todo deleted.\")\n    props.onDeleteTodoItem(todo)\n  }\n\n  const onChangeFilter = (filter: FilterModel) => {\n    filter.save()\n    setFilterModelAttrs(filter.toJSON())\n  }\n\n  const onSubjectClick = (subject: string) => {\n    filterModel.addSubjectContains(subject)\n    onChangeFilter(filterModel)\n  }\n\n  const todoUUIDs = groups.map(g => g.todos.map(t => t.uuid)).flat()\n  const onKeypress = event => {\n    if (storage.isModalOpen()) return\n\n    let nextTodoUUID = todoUUIDs[todoUUIDs.indexOf(selectedTodoUUID) + 1]\n    if (nextTodoUUID === undefined) nextTodoUUID = todoUUIDs[0]\n\n    let prevTodoUUID = todoUUIDs[todoUUIDs.indexOf(selectedTodoUUID) - 1]\n    if (prevTodoUUID === undefined)\n      prevTodoUUID = todoUUIDs[todoUUIDs.length - 1]\n\n    if (event.keyCode === 106) setSelectedTodoUUID(nextTodoUUID)\n    if (event.keyCode === 107) setSelectedTodoUUID(prevTodoUUID)\n  }\n\n  useEffect(() => {\n    document.addEventListener(\"keypress\", onKeypress)\n\n    return () => {\n      document.removeEventListener(\"keypress\", onKeypress)\n    }\n  })\n\n  return (\n    <React.Fragment>\n      <div className={classes.listContainer}>\n        <Typography component=\"h4\" variant=\"h4\" className={classes.listName}>\n          {props.todoList.name}\n        </Typography>\n\n        <div className={classes.filterChips}>\n          <FilterChips\n            currentFilter={filterModel}\n            onChangeFilter={onChangeFilter}\n          />\n        </div>\n\n        {groups.map(g => (\n          <TodoGroup\n            key={g.uuid}\n            selectedTodoUUID={selectedTodoUUID}\n            onChange={onChangeTodo}\n            onDelete={onDeleteTodo}\n            onSubjectClick={onSubjectClick}\n            group={g}\n          />\n        ))}\n      </div>\n\n      <AddTodo onAddTodoItem={onAddTodo} />\n      <BottomBar currentFilter={filterModel} onChangeFilter={onChangeFilter} />\n    </React.Fragment>\n  )\n}\n\nexport default withSnackbar(TodoList)\n","// @flow\nimport React, { useState } from \"react\"\n\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport Tooltip from \"@material-ui/core/Tooltip\"\nimport ViewArrayIcon from \"@material-ui/icons/ViewArray\"\nimport { makeStyles } from \"@material-ui/styles\"\n\nimport TodoListModel from \"../../models/todoList\"\n\nconst useStyles = makeStyles(theme => {\n  return {\n    icon: {\n      color: \"#fff !important\" // TODO: make this use theme\n    }\n  }\n})\n\ntype Props = {\n  todoLists: Array<TodoListModel>,\n  onSelectTodoList: (todoList: TodoListModel) => void\n}\n\nconst TodoListSelection = props => (\n  <ListItem button onClick={props.onClick}>\n    <ListItemText primary={props.name} />\n  </ListItem>\n)\n\nconst Chooser = (props: Props) => {\n  const classes = useStyles()\n  const [isOpen, setIsOpen] = useState(false)\n\n  const toggleOpen = () => {\n    setIsOpen(!isOpen)\n  }\n\n  const onSelectList = (l: TodoListModel) => {\n    toggleOpen()\n    props.onSelectTodoList(l)\n  }\n\n  return (\n    <React.Fragment>\n      <Tooltip disableFocusListener={true} title=\"Choose todolist\">\n        <IconButton className={classes.icon} onClick={toggleOpen}>\n          <ViewArrayIcon />\n        </IconButton>\n      </Tooltip>\n      <Dialog onClose={toggleOpen} open={isOpen}>\n        <DialogTitle>Choose Todolist</DialogTitle>\n        <List>\n          {props.todoLists.map(l => (\n            <TodoListSelection\n              name={l.name}\n              key={l.uuid}\n              onClick={onSelectList.bind(this, l)}\n            />\n          ))}\n        </List>\n      </Dialog>\n    </React.Fragment>\n  )\n}\n\nexport default Chooser\n","// @flow\nimport React, { useState } from \"react\"\n\nimport Tooltip from \"@material-ui/core/Tooltip\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Button from \"@material-ui/core/Button\"\nimport AddIcon from \"@material-ui/icons/Add\"\nimport TextField from \"@material-ui/core/TextField\"\n\nimport { makeStyles } from \"@material-ui/styles\"\n\nimport TodoListModel from \"../../models/todoList\"\nimport Storage from \"../../backend/storage\"\n\ntype Props = {\n  onCreateTodoList: (newList: TodoListModel) => void\n}\n\nconst useStyles = makeStyles(theme => {\n  return {\n    icon: {\n      color: \"#fff !important\" // TODO: make this use theme\n    },\n    margin: {\n      marginLeft: 20,\n      width: \"90%\"\n    }\n  }\n})\n\nconst nameRef = React.createRef()\n\nconst CreateTodoList = (props: Props) => {\n  const classes = useStyles()\n  const [isOpen, setIsOpen] = useState(false)\n\n  const toggleOpen = () => {\n    setIsOpen(!isOpen)\n  }\n\n  const storage = new Storage()\n  storage.setModalIsOpen(isOpen)\n\n  const createList = () => {\n    const newList = new TodoListModel({ name: nameRef.current.value })\n    props.onCreateTodoList(newList)\n    setIsOpen(false)\n  }\n\n  return (\n    <React.Fragment>\n      <Tooltip disableFocusListener={true} title=\"Create new todolist\">\n        <IconButton className={classes.icon} onClick={toggleOpen}>\n          <AddIcon />\n        </IconButton>\n      </Tooltip>\n      <Dialog fullWidth maxWidth=\"sm\" onClose={toggleOpen} open={isOpen}>\n        <DialogTitle>Create New Todolist</DialogTitle>\n        <TextField\n          label=\"Name\"\n          margin=\"dense\"\n          autoFocus\n          className={classes.margin}\n          autoComplete=\"off\"\n          inputRef={nameRef}\n        />\n\n        <DialogActions>\n          <Button color=\"primary\" onClick={createList}>\n            Create\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n  )\n}\n\nexport default CreateTodoList\n","// @flow\nimport { SOCKET_URL } from \"../constants\"\nimport UserModel from \"../models/user\"\n\nexport class WebsocketProcessor {\n  name: string\n  processorFn: (data: Object) => void\n\n  constructor(name: string, processorFn: (data: Object) => void) {\n    this.name = name\n    this.processorFn = processorFn\n  }\n}\n\nexport class WebsocketHandler {\n  processors: Array<WebsocketProcessor>\n  socket: WebSocket\n  user: UserModel\n\n  constructor() {\n    this.processors = []\n  }\n\n  registerSocket(user?: UserModel) {\n    if (this.socket && this.socket.readyState === this.socket.OPEN) return\n\n    if (user) this.user = user\n\n    const msg = {\n      client_id: \"frontend\",\n      channel: this.user.uuid,\n      request: \"register_listener\"\n    }\n\n    this.socket = new WebSocket(SOCKET_URL)\n\n    this.socket.onopen = () => {\n      this.socket.send(JSON.stringify(msg))\n      this.ping()\n    }\n\n    this.socket.onmessage = event => {\n      const data = JSON.parse(event.data)\n      this.processors.forEach(processor => processor.processorFn(data))\n    }\n\n    this.socket.onclose = event => {\n      setTimeout(this.registerSocket.bind(this), 5000)\n    }\n  }\n\n  ping() {\n    if (!this.socket) return\n    if (this.socket.readyState !== this.socket.OPEN) return\n\n    const msg = {\n      client_id: \"frontend\",\n      channel: this.user.uuid,\n      request: \"ping\"\n    }\n\n    this.socket.send(JSON.stringify(msg))\n    setTimeout(this.ping.bind(this), 10000)\n  }\n\n  registerProcessor(processor: WebsocketProcessor) {\n    this.processors.push(processor)\n  }\n\n  deregisterProcessor(name: string) {\n    this.processors = this.processors.filter(p => p.name !== name)\n  }\n}\nwindow.socket = new WebsocketHandler()\n","// @flow\nimport React, { useState, useEffect } from \"react\"\nimport { parseISO } from \"date-fns\"\nimport { withSnackbar } from \"notistack\"\n\nimport Backend from \"../backend/backend\"\nimport Storage from \"../backend/storage\"\nimport TestBackend from \"../backend/testBackend\"\nimport EventCache from \"../backend/eventCache\"\n\nimport TopBar from \"../components/topBar\"\nimport UserIcon from \"../components/userIcon\"\nimport TodoList from \"../components/todoList/todoList\"\nimport TodoListChooser from \"../components/topBar/todoListChooser\"\nimport CreateTodoList from \"../components/topBar/createTodoList\"\nimport {\n  createAddEvent,\n  createUpdateEvent,\n  createDeleteEvent\n} from \"../models/todoEvent\"\nimport TodoItemModel from \"../models/todoItem\"\nimport { loadUser } from \"../models/user\"\nimport { WebsocketProcessor } from \"../config/websocket\"\n\nimport TodoListModel, { createTodoListFromBackend } from \"../models/todoList\"\n\ntype Props = {\n  backend?: TestBackend\n}\n\nconst eventCache = new EventCache()\nconst storage = new Storage()\nconst TODOLIST_MRU_KEY = \"todolist-mru-id\"\n\nconst TodoListApp = (props: Props) => {\n  const todoLists = storage.loadTodoLists()\n  let mostRecentTodoList\n  if (props.match.params.id) {\n    mostRecentTodoList = todoLists.find(t => t.uuid === props.match.params.id)\n    window.localStorage.setItem(TODOLIST_MRU_KEY, mostRecentTodoList.uuid)\n  } else {\n    mostRecentTodoList = todoLists.find(\n      tl => tl.uuid === window.localStorage.getItem(TODOLIST_MRU_KEY)\n    )\n  }\n\n  const [todoList, setTodoList] = useState(mostRecentTodoList || todoLists[0])\n\n  const user = loadUser()\n  window.socket.registerSocket(user)\n  const backend = props.backend || new Backend(user.token)\n\n  const fetchList = (list: TodoListModel, cb) => {\n    if (!navigator.onLine) return\n\n    backend.fetchTodoList(list.uuid).then(l => {\n      l = createTodoListFromBackend(l)\n      storage.updateTodoList(l)\n      if (cb) cb(l)\n    })\n  }\n\n  const fetchLists = () => {\n    backend.fetchTodoLists().then(todoLists => {\n      const lists = todoLists.todolists.map(list =>\n        createTodoListFromBackend(list)\n      )\n      const currentList = lists.find(\n        l => l.uuid === window.localStorage.getItem(TODOLIST_MRU_KEY)\n      )\n      storage.saveTodoLists(lists)\n      setTodoList(currentList)\n    })\n  }\n\n  const processSocketUpdate = data => {\n    setTimeout(() => {\n      const updatedAt = parseISO(data.data.updated_at)\n      const updatedList = storage.loadTodoList(data.data.uuid)\n      if (updatedAt > updatedList.updatedAt) {\n        if (updatedList.uuid === todoList.uuid) {\n          fetchList(updatedList, list => setTodoList(list))\n        } else {\n          fetchList(updatedList)\n        }\n      }\n    }, 500)\n  }\n\n  useEffect(() => {\n    fetchLists()\n\n    const socketProcessor = new WebsocketProcessor(\n      \"todolist_update\",\n      processSocketUpdate\n    )\n    window.socket.registerProcessor(socketProcessor)\n\n    return () => {\n      window.socket.deregisterProcessor(\"todolist_update\")\n    }\n  }, [])\n\n  const update = () => {\n    if (!navigator.onLine) return\n\n    backend.updateTodoList(todoList.uuid, eventCache).then(list => {\n      const newTodoList = createTodoListFromBackend(list)\n      storage.updateTodoList(newTodoList)\n      setTodoList(newTodoList)\n      eventCache.clear()\n    })\n  }\n\n  const onAddTodoItem = (todoItem: TodoItemModel) => {\n    eventCache.addItem(createAddEvent(todoItem))\n    update()\n  }\n\n  const onChangeTodoItem = (todoItem: TodoItemModel) => {\n    eventCache.addItem(createUpdateEvent(todoItem))\n    update()\n  }\n\n  const onDeleteTodoItem = (todoItem: TodoItemModel) => {\n    eventCache.addItem(createDeleteEvent(todoItem))\n    update()\n  }\n\n  const onChangeTodoList = (newList: TodoListModel) => {\n    props.history.push(`/todolist/${newList.uuid}`)\n    setTodoList(newList)\n    fetchList(newList, list => setTodoList(list))\n  }\n\n  const onCreateTodoList = (todoList: TodoListModel) => {\n    backend.createTodoList(todoList.uuid, todoList.name).then(todoList => {\n      todoList = createTodoListFromBackend(todoList)\n      const lists = storage.loadTodoLists()\n      lists.push(todoList)\n      storage.saveTodoLists(lists)\n      props.enqueueSnackbar(\"Todolist created.\")\n      setTodoList(todoList)\n    })\n  }\n\n  return (\n    <React.Fragment>\n      <TopBar>\n        <CreateTodoList onCreateTodoList={onCreateTodoList} />\n        <TodoListChooser\n          todoLists={todoLists}\n          onSelectTodoList={onChangeTodoList}\n        />\n        <UserIcon />\n      </TopBar>\n\n      <TodoList\n        todoList={todoList}\n        onAddTodoItem={onAddTodoItem}\n        onChangeTodoItem={onChangeTodoItem}\n        onDeleteTodoItem={onDeleteTodoItem}\n      />\n    </React.Fragment>\n  )\n}\nexport default withSnackbar(TodoListApp)\n","// @flow\n\nimport React from \"react\"\nimport { Router, Route, Redirect } from \"react-router-dom\"\n// import createBrowserHistory from \"history/createBrowserHistory\"\nimport createHashHistory from \"history/createHashHistory\"\n\nimport TodoList from \"../pages/todoList\"\nimport Login from \"../pages/login\"\nimport Logout from \"../pages/logout\"\nimport Auth from \"../pages/auth\"\nimport LoadTodoLists from \"../pages/loadTodoLists\"\n\nconst isCordova = !!window.cordova\n\nlet history\nif (isCordova) {\n  history = createHashHistory()\n} else {\n  history = createHashHistory()\n}\n\nconst Routes = () => (\n  <Router history={history}>\n    <React.Fragment>\n      <Route exact={true} path=\"/todolist\" component={TodoList} />\n      <Route exact={true} path=\"/todolist/:id\" component={TodoList} />\n\n      <Route path=\"/login\" component={Login} />\n      <Route path=\"/logout\" component={Logout} />\n      <Route path=\"/auth\" component={Auth} />\n      <Route path=\"/loading\" component={LoadTodoLists} />\n\n      <Route exact={true} path=\"/\" render={() => <Redirect to=\"/login\" />} />\n    </React.Fragment>\n  </Router>\n)\n\nexport default Routes\n","// @flow\nimport React from \"react\"\nimport Typography from \"@material-ui/core/Typography\"\nimport Button from \"@material-ui/core/Button\"\nimport Paper from \"@material-ui/core/Paper\"\nimport { makeStyles } from \"@material-ui/styles\"\n\nimport TopBar from \"../components/topBar\"\n\nimport { BACKEND_URL } from \"../constants\"\nimport { isUserLoggedIn } from \"../models/user\"\n\nconst useStyles = makeStyles({\n  middle: {\n    height: \"100vh\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  loginPaper: {\n    width: 400,\n    padding: 40,\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  paperItem: {\n    margin: 20\n  }\n})\n\nconst Login = props => {\n  const classes = useStyles()\n\n  if (isUserLoggedIn()) {\n    props.history.push(\"/todolist\")\n    return null\n  }\n\n  return (\n    <React.Fragment>\n      <TopBar />\n      <div className={classes.middle}>\n        <Paper className={classes.loginPaper}>\n          <Typography variant=\"h4\" marked=\"center\" align=\"center\">\n            Sign In\n          </Typography>\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            href={`${BACKEND_URL}/users/auth/google_oauth2`}\n            className={classes.paperItem}\n          >\n            Login with Google\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            href={`${BACKEND_URL}/users/auth/github`}\n            className={classes.paperItem}\n          >\n            Login with Github\n          </Button>\n        </Paper>\n      </div>\n    </React.Fragment>\n  )\n}\n\nexport default Login\n","// @flow\nimport React from \"react\"\nimport { logoutUser } from \"../models/user\"\nimport { Redirect } from \"react-router-dom\"\n\nconst Logout = () => {\n  logoutUser()\n  return <Redirect to=\"/login\" />\n}\n\nexport default Logout\n","// @flow\nimport React from \"react\"\nimport { Redirect } from \"react-router-dom\"\n\nimport utils from \"../utils\"\nimport UserModel from \"../models/user\"\n\nconst Auth = () => {\n  const name = utils.getUrlParam(\"name\")\n  const uuid = utils.getUrlParam(\"uuid\")\n  const token = utils.getUrlParam(\"token\")\n  const email = utils.getUrlParam(\"email\")\n  const imageUrl = utils.getUrlParam(\"image_url\")\n\n  const user = new UserModel({\n    name,\n    uuid,\n    token,\n    email,\n    imageUrl\n  })\n\n  user.save()\n\n  return <Redirect to=\"/loading\" />\n}\n\nexport default Auth\n","// @flow\nimport React from \"react\"\nimport { Redirect } from \"react-router-dom\"\n\nimport Backend from \"../backend/backend\"\nimport Storage from \"../backend/storage\"\nimport TestBackend from \"../backend/testBackend\"\nimport { createTodoListFromBackend } from \"../models/todoList\"\n\nimport { loadUser } from \"../models/user\"\n\ntype Props = {\n  backend?: TestBackend,\n  history: any\n}\n\nconst storage = new Storage()\n\nconst LoadTodoLists = (props: Props) => {\n  const user = loadUser()\n  if (user.token === null) return <Redirect to=\"/login\" />\n\n  const backend = props.backend || new Backend(user.token)\n\n  backend.fetchTodoLists().then(todoLists => {\n    const lists = todoLists.todolists.map(list =>\n      createTodoListFromBackend(list)\n    )\n    storage.saveTodoLists(lists)\n    props.history.push(`/todolist/${lists[0].uuid}`)\n  })\n\n  return <h1>Loading...</h1>\n}\n\nexport default LoadTodoLists\n","// @flow\nimport React from \"react\"\nimport CssBaseline from \"@material-ui/core/CssBaseline\"\nimport indigo from \"@material-ui/core/colors/indigo\"\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\"\nimport { SnackbarProvider } from \"notistack\"\n\nimport Router from \"../config/router\"\nimport { WebsocketHandler } from \"../config/websocket\"\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: indigo,\n    secondary: {\n      main: \"#f44336\"\n    }\n  }\n})\n\nwindow.socket = new WebsocketHandler()\n\nconst Index = () => {\n  console.log(\"Index page\")\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      <SnackbarProvider\n        maxSnack={1}\n        preventDuplicate\n        anchorOrigin={{ vertical: \"top\", horizontal: \"left\" }}\n      >\n        <MuiThemeProvider theme={theme}>\n          <Router />\n        </MuiThemeProvider>\n      </SnackbarProvider>\n    </React.Fragment>\n  )\n}\n\nexport default Index\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Index from \"./pages/index\"\n// import * as serviceWorker from \"./config/serviceWorker\"\n\nconsole.log(\"index.js\")\nReactDOM.render(<Index />, document.getElementById(\"root\"))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n// serviceWorker.register()\n"],"sourceRoot":""}